<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Vibe Check ‚Äî Is Your Idea Worth Building?</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet" />
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --bg: #0d0d0f;
      --surface: #16161a;
      --surface2: #1e1e24;
      --border: #2a2a35;
      --text: #e8e8f0;
      --muted: #8888a0;
      --accent: #7c6ff7;
      --accent2: #a78bfa;
      --green: #34d399;
      --yellow: #fbbf24;
      --red: #f87171;
      --blue: #60a5fa;
      --pink: #f472b6;
    }

    body {
      font-family: 'Inter', sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
      -webkit-font-smoothing: antialiased;
    }

    /* ‚îÄ‚îÄ LANDING ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
    #landing {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      padding: 40px 20px;
    }

    .landing-inner {
      width: 100%;
      max-width: 600px;
      display: flex;
      flex-direction: column;
      gap: 28px;
    }

    .landing-badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      background: rgba(124,111,247,0.12);
      border: 1px solid rgba(124,111,247,0.3);
      border-radius: 100px;
      padding: 4px 12px;
      font-size: 12px;
      font-weight: 600;
      color: var(--accent2);
      letter-spacing: 0.05em;
      text-transform: uppercase;
      width: fit-content;
    }

    .landing-title {
      font-size: clamp(36px, 6vw, 52px);
      font-weight: 800;
      line-height: 1.1;
      letter-spacing: -0.03em;
      color: var(--text);
    }

    .landing-title span {
      background: linear-gradient(135deg, var(--accent) 0%, var(--accent2) 50%, var(--pink) 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .landing-sub {
      font-size: 16px;
      color: var(--muted);
      line-height: 1.6;
      margin-top: -12px;
    }

    .form-card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 20px;
      padding: 24px;
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    /* Skill section */
    .skill-section {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .skill-question {
      font-size: 13px;
      font-weight: 600;
      color: var(--muted);
      text-transform: uppercase;
      letter-spacing: 0.06em;
    }

    .segmented {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      background: var(--surface2);
      border-radius: 10px;
      padding: 4px;
      gap: 4px;
    }

    .seg-btn {
      padding: 9px 8px;
      border: none;
      border-radius: 7px;
      background: transparent;
      color: var(--muted);
      font-size: 13px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.15s;
      font-family: inherit;
      white-space: nowrap;
    }

    .seg-btn:hover { color: var(--text); background: rgba(255,255,255,0.05); }

    .seg-btn.active {
      background: var(--accent);
      color: #fff;
      font-weight: 600;
      box-shadow: 0 0 12px rgba(124,111,247,0.4);
    }

    /* Textarea */
    .idea-section {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .idea-label {
      font-size: 13px;
      font-weight: 600;
      color: var(--muted);
      text-transform: uppercase;
      letter-spacing: 0.06em;
    }

    textarea {
      width: 100%;
      background: var(--surface2);
      border: 1px solid var(--border);
      border-radius: 12px;
      color: var(--text);
      font-family: inherit;
      font-size: 15px;
      line-height: 1.6;
      padding: 14px 16px;
      resize: vertical;
      min-height: 110px;
      transition: border-color 0.2s;
      outline: none;
    }

    textarea::placeholder { color: #4a4a60; }
    textarea:focus { border-color: var(--accent); }

    /* Analyze button - Web3 style */
    .analyze-btn {
      width: 100%;
      padding: 18px 24px;
      background: linear-gradient(135deg, var(--accent) 0%, #9b7fe8 50%, var(--pink) 100%);
      border: none;
      border-radius: 14px;
      color: #fff;
      font-family: inherit;
      font-size: 16px;
      font-weight: 700;
      letter-spacing: 0.02em;
      cursor: pointer;
      transition: all 0.2s;
      box-shadow: 0 0 30px rgba(124,111,247,0.35), 0 4px 20px rgba(0,0,0,0.4);
    }

    .analyze-btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 0 40px rgba(124,111,247,0.5), 0 8px 30px rgba(0,0,0,0.4);
    }

    .analyze-btn:active { transform: translateY(0); }
    .analyze-btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }

    /* ‚îÄ‚îÄ RESULTS PAGE ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
    #results { display: none; min-height: 100vh; }

    .results-layout {
      display: grid;
      grid-template-columns: 160px 1fr;
      max-width: 1100px;
      margin: 0 auto;
      padding: 40px 20px;
      gap: 40px;
      align-items: start;
    }

    /* Sidebar nav */
    .results-nav {
      position: sticky;
      top: 40px;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .nav-item {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px 10px;
      border-radius: 8px;
      color: var(--muted);
      font-size: 13px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.15s;
      border: none;
      background: transparent;
      font-family: inherit;
      text-align: left;
    }

    .nav-item:hover { color: var(--text); background: rgba(255,255,255,0.04); }

    .nav-item.active {
      color: var(--accent2);
      background: rgba(124,111,247,0.1);
      font-weight: 600;
    }

    .nav-dot {
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: currentColor;
      flex-shrink: 0;
    }

    @media (max-width: 900px) {
      .results-layout { grid-template-columns: 1fr; }
      .results-nav { display: none; }
    }

    /* Results content */
    .results-content { min-width: 0; }

    .results-header {
      margin-bottom: 32px;
    }

    .results-title {
      font-size: 26px;
      font-weight: 800;
      letter-spacing: -0.02em;
      margin-bottom: 4px;
    }

    .results-idea-label {
      font-size: 14px;
      color: var(--muted);
    }

    /* Cards grid */
    .cards-grid {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    .card-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
    }

    @media (max-width: 680px) { .card-row { grid-template-columns: 1fr; } }

    .result-card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 24px;
      scroll-margin-top: 40px;
    }

    .card-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 16px;
    }

    .card-title {
      font-size: 12px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--muted);
    }

    .card-badge {
      font-size: 11px;
      font-weight: 600;
      padding: 3px 8px;
      border-radius: 6px;
      background: var(--surface2);
    }

    .card-body { display: flex; flex-direction: column; gap: 12px; }

    /* Vibe Score hero */
    #sec-score {
      background: linear-gradient(135deg, rgba(124,111,247,0.08) 0%, rgba(244,114,182,0.06) 100%);
      border-color: rgba(124,111,247,0.25);
    }

    .vibe-hero { text-align: center; padding: 8px 0 4px; }

    .vibe-grade {
      font-size: 80px;
      font-weight: 800;
      line-height: 1;
      background: linear-gradient(135deg, var(--accent) 0%, var(--pink) 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .vibe-summary-text {
      font-size: 16px;
      color: var(--muted);
      margin: 8px 0 16px;
    }

    .vibe-pills {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      justify-content: center;
      margin-bottom: 8px;
    }

    .vibe-detail {
      font-size: 12px;
      color: var(--muted);
      text-align: center;
      margin-top: 4px;
    }

    .pill {
      display: inline-flex;
      align-items: center;
      gap: 5px;
      padding: 5px 10px;
      border-radius: 100px;
      font-size: 12px;
      font-weight: 600;
    }

    .pill-green  { background: rgba(52,211,153,0.12); color: var(--green); border: 1px solid rgba(52,211,153,0.2); }
    .pill-yellow { background: rgba(251,191,36,0.12); color: var(--yellow); border: 1px solid rgba(251,191,36,0.2); }
    .pill-red    { background: rgba(248,113,113,0.12); color: var(--red); border: 1px solid rgba(248,113,113,0.2); }
    .pill-blue   { background: rgba(96,165,250,0.12); color: var(--blue); border: 1px solid rgba(96,165,250,0.2); }
    .pill-purple { background: rgba(124,111,247,0.12); color: var(--accent2); border: 1px solid rgba(124,111,247,0.2); }
    .pill-muted  { background: var(--surface2); color: var(--muted); border: 1px solid var(--border); }

    /* Summary text */
    .summary-text {
      font-size: 14px;
      line-height: 1.65;
      color: #c0c0d8;
    }

    /* Section label */
    .section-label {
      font-size: 11px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--muted);
      margin-bottom: 8px;
    }

    /* Competitor cards */
    .competitor-list { display: flex; flex-direction: column; gap: 12px; }

    .competitor-card {
      background: var(--surface2);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 14px 16px;
    }

    .competitor-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 6px;
    }

    .competitor-name {
      font-size: 14px;
      font-weight: 700;
      color: var(--text);
    }

    .competitor-url {
      font-size: 12px;
      color: var(--accent2);
      text-decoration: none;
    }
    .competitor-url:hover { text-decoration: underline; }

    .competitor-desc {
      font-size: 13px;
      color: var(--muted);
      margin-bottom: 8px;
      line-height: 1.5;
    }

    .competitor-meta {
      display: flex;
      gap: 16px;
      font-size: 12px;
    }

    .competitor-meta-item { display: flex; flex-direction: column; gap: 2px; }
    .meta-label { color: #555570; font-weight: 600; text-transform: uppercase; font-size: 10px; letter-spacing: 0.05em; }
    .meta-val { color: var(--muted); }

    /* Strengths/weaknesses tags */
    .sw-row { display: flex; gap: 8px; flex-wrap: wrap; margin-top: 8px; }
    .sw-tag {
      font-size: 11px;
      padding: 2px 8px;
      border-radius: 6px;
      font-weight: 500;
    }
    .sw-strength { background: rgba(52,211,153,0.1); color: var(--green); }
    .sw-weakness { background: rgba(248,113,113,0.1); color: var(--red); }

    /* Audience / monetization */
    .segment-list { display: flex; flex-direction: column; gap: 8px; }

    .segment-item {
      background: var(--surface2);
      border-radius: 10px;
      padding: 12px 14px;
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .segment-name { font-size: 13px; font-weight: 600; color: var(--text); }

    .segment-meta {
      display: flex;
      gap: 6px;
      flex-wrap: wrap;
    }

    /* Monetization */
    .mono-item {
      background: var(--surface2);
      border-radius: 10px;
      padding: 12px 14px;
      margin-bottom: 8px;
    }

    .mono-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 4px;
    }

    .mono-model { font-size: 13px; font-weight: 700; color: var(--text); }
    .mono-desc { font-size: 13px; color: var(--muted); line-height: 1.5; }

    /* Tech stack */
    .stack-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 8px;
    }

    .stack-item {
      background: var(--surface2);
      border-radius: 10px;
      padding: 10px 12px;
    }

    .stack-layer { font-size: 10px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.06em; color: #555570; margin-bottom: 3px; }
    .stack-val { font-size: 13px; color: var(--muted); }

    /* Build time */
    .build-time-big {
      text-align: center;
      padding: 16px 0;
    }
    .build-time-num {
      font-size: 36px;
      font-weight: 800;
      color: var(--text);
      line-height: 1;
    }
    .build-time-label {
      font-size: 13px;
      color: var(--muted);
      margin-top: 4px;
    }

    /* Deployment options */
    .deploy-list { display: flex; flex-direction: column; gap: 8px; }

    .deploy-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: var(--surface2);
      border-radius: 10px;
      padding: 10px 14px;
    }

    .deploy-platform { font-size: 13px; font-weight: 600; color: var(--text); }
    .deploy-time { font-size: 12px; color: var(--muted); }
    .deploy-reason { font-size: 12px; color: var(--muted); margin-top: 3px; }

    /* Community pulse / sentiment */
    .sentiment-list { display: flex; flex-direction: column; gap: 10px; }

    .sentiment-item {
      background: var(--surface2);
      border-radius: 12px;
      padding: 14px 16px;
      border-left: 3px solid transparent;
    }

    .sentiment-item.pain_point { border-left-color: var(--red); }
    .sentiment-item.loved_feature { border-left-color: var(--green); }
    .sentiment-item.wish { border-left-color: var(--yellow); }

    .sentiment-quote {
      font-size: 13px;
      line-height: 1.6;
      color: #c0c0d8;
      font-style: italic;
      margin-bottom: 8px;
    }

    .sentiment-meta {
      display: flex;
      align-items: center;
      gap: 8px;
      flex-wrap: wrap;
    }

    .sentiment-theme {
      font-size: 11px;
      font-weight: 600;
      color: var(--muted);
    }

    .sentiment-source {
      font-size: 11px;
      color: #444460;
    }

    /* How to win */
    .win-list { display: flex; flex-direction: column; gap: 8px; }

    .win-item {
      background: var(--surface2);
      border-radius: 10px;
      padding: 14px 16px;
    }

    .win-header {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 4px;
    }

    .win-suggestion { font-size: 13px; font-weight: 600; color: var(--text); }
    .win-reasoning { font-size: 13px; color: var(--muted); line-height: 1.5; }

    /* APIs */
    .api-list { display: flex; flex-direction: column; gap: 6px; }

    .api-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: var(--surface2);
      border-radius: 8px;
      padding: 8px 12px;
    }

    .api-name { font-size: 13px; color: var(--text); font-weight: 500; }
    .api-name a { color: var(--accent2); text-decoration: none; }
    .api-name a:hover { text-decoration: underline; }
    .api-cost { font-size: 12px; color: var(--muted); }

    /* Status bar */
    .status-bar {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 16px 20px;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .status-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: var(--accent);
      animation: pulse 1.2s infinite;
      flex-shrink: 0;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; transform: scale(1); }
      50% { opacity: 0.4; transform: scale(0.8); }
    }

    .status-text { font-size: 14px; color: var(--muted); }

    /* Skeleton loaders */
    .skeleton {
      background: linear-gradient(90deg, var(--surface2) 25%, #22222e 50%, var(--surface2) 75%);
      background-size: 200% 100%;
      animation: shimmer 1.5s infinite;
      border-radius: 8px;
    }

    @keyframes shimmer { 0% { background-position: 200% 0; } 100% { background-position: -200% 0; } }

    /* Action row */
    .action-row {
      display: none;
      align-items: center;
      gap: 12px;
      padding-top: 24px;
      border-top: 1px solid var(--border);
      margin-top: 8px;
      flex-wrap: wrap;
    }

    .action-row.visible { display: flex; }

    .btn-secondary {
      padding: 10px 18px;
      background: var(--surface2);
      border: 1px solid var(--border);
      border-radius: 10px;
      color: var(--text);
      font-family: inherit;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.15s;
    }

    .btn-secondary:hover { background: rgba(255,255,255,0.06); border-color: rgba(255,255,255,0.15); }

    .btn-accent {
      padding: 10px 18px;
      background: rgba(124,111,247,0.15);
      border: 1px solid rgba(124,111,247,0.3);
      border-radius: 10px;
      color: var(--accent2);
      font-family: inherit;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.15s;
    }

    .btn-accent:hover { background: rgba(124,111,247,0.25); }

    /* Loading card placeholder */
    .card-loading {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    /* Divider label for win sections */
    .win-divider {
      font-size: 10px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: #444460;
      margin: 4px 0 2px;
    }

    /* Saturation bar */
    .sat-bar-wrap {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .sat-bar-bg {
      flex: 1;
      height: 6px;
      background: var(--surface2);
      border-radius: 100px;
      overflow: hidden;
    }
    .sat-bar-fill {
      height: 100%;
      border-radius: 100px;
      background: linear-gradient(90deg, var(--green), var(--yellow), var(--red));
      transition: width 0.6s ease;
    }
    .sat-bar-label { font-size: 12px; color: var(--muted); white-space: nowrap; }

    /* Score bar */
    .score-bars { display: flex; flex-direction: column; gap: 8px; margin-top: 4px; }
    .score-row { display: flex; align-items: center; gap: 10px; }
    .score-row-label { font-size: 12px; color: var(--muted); width: 100px; flex-shrink: 0; }
    .score-bar-bg { flex: 1; height: 6px; background: var(--surface2); border-radius: 100px; overflow: hidden; }
    .score-bar-fill { height: 100%; border-radius: 100px; background: var(--accent); }
    .score-row-val { font-size: 12px; color: var(--muted); width: 24px; text-align: right; flex-shrink: 0; }

    /* Empty state */
    .empty-state {
      text-align: center;
      padding: 24px;
      color: var(--muted);
      font-size: 14px;
    }

    /* Tooltip copy feedback */
    .copy-feedback {
      position: fixed;
      bottom: 24px;
      right: 24px;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 12px 18px;
      font-size: 14px;
      color: var(--green);
      font-weight: 600;
      opacity: 0;
      transform: translateY(8px);
      transition: all 0.2s;
      pointer-events: none;
      z-index: 999;
    }
    .copy-feedback.show { opacity: 1; transform: translateY(0); }
  </style>
</head>
<body>

<!-- ‚îÄ‚îÄ LANDING ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
<section id="landing">
  <div class="landing-inner">
    <div>
      <div class="landing-badge">‚ö° AI-Powered</div>
    </div>

    <div>
      <h1 class="landing-title">Is your idea<br/><span>worth building?</span></h1>
      <p class="landing-sub">Drop your idea. Get a real market analysis, technical breakdown, and opportunity score in under 60 seconds.</p>
    </div>

    <div class="form-card">
      <!-- Skill level selector -->
      <div class="skill-section">
        <div class="skill-question">What's your vibe coding experience?</div>
        <div class="segmented">
          <button class="seg-btn active" onclick="selectSkill(0)">First project</button>
          <button class="seg-btn" onclick="selectSkill(1)">Done a few</button>
          <button class="seg-btn" onclick="selectSkill(2)">Build regularly</button>
        </div>
      </div>

      <!-- Idea textarea -->
      <div class="idea-section">
        <div class="idea-label">Your idea</div>
        <textarea
          id="idea-input"
          placeholder="e.g. A mobile app that lets friends split restaurant bills by scanning the receipt with their camera..."
          rows="4"
        ></textarea>
      </div>

      <!-- Analyze button -->
      <button class="analyze-btn" id="analyze-btn" onclick="analyze()">Analyze Idea</button>
    </div>
  </div>
</section>

<!-- ‚îÄ‚îÄ RESULTS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
<section id="results">
  <div class="results-layout">

    <!-- Sidebar nav -->
    <nav class="results-nav" id="results-nav">
      <button class="nav-item active" onclick="jumpTo('sec-score')">
        <span class="nav-dot"></span> Vibe Score
      </button>
      <button class="nav-item" onclick="jumpTo('sec-market')">
        <span class="nav-dot"></span> Market
      </button>
      <button class="nav-item" onclick="jumpTo('sec-competitors')">
        <span class="nav-dot"></span> Competitors
      </button>
      <button class="nav-item" onclick="jumpTo('sec-audience')">
        <span class="nav-dot"></span> Audience
      </button>
      <button class="nav-item" onclick="jumpTo('sec-build')">
        <span class="nav-dot"></span> Build It
      </button>
      <button class="nav-item" onclick="jumpTo('sec-ship')">
        <span class="nav-dot"></span> Ship It
      </button>
      <button class="nav-item" onclick="jumpTo('sec-pulse')">
        <span class="nav-dot"></span> Community
      </button>
      <button class="nav-item" onclick="jumpTo('sec-win')">
        <span class="nav-dot"></span> How to Win
      </button>
    </nav>

    <!-- Main content -->
    <div class="results-content">
      <div class="results-header">
        <div class="results-title" id="results-title">Analyzing your idea...</div>
        <div class="results-idea-label" id="results-idea-label"></div>
      </div>

      <!-- Status bar -->
      <div class="status-bar" id="status-bar">
        <div class="status-dot"></div>
        <div class="status-text" id="status-text">Getting started...</div>
      </div>

      <div class="cards-grid">
        <!-- Vibe Score -->
        <div class="result-card" id="sec-score">
          <div class="card-header">
            <div class="card-title">Vibe Score</div>
          </div>
          <div id="score-body" class="card-body">
            <div class="card-loading">
              <div class="skeleton" style="height:80px; border-radius:12px;"></div>
              <div class="skeleton" style="height:20px; width:60%;"></div>
            </div>
          </div>
        </div>

        <!-- Market Overview -->
        <div class="result-card" id="sec-market">
          <div class="card-header">
            <div class="card-title">Market Overview</div>
            <div class="card-badge" id="market-badge">‚Äî</div>
          </div>
          <div id="market-body" class="card-body">
            <div class="card-loading">
              <div class="skeleton" style="height:60px; border-radius:8px;"></div>
              <div class="skeleton" style="height:8px; width:80%;"></div>
            </div>
          </div>
        </div>

        <!-- Competitors -->
        <div class="result-card" id="sec-competitors">
          <div class="card-header">
            <div class="card-title">Competitors</div>
          </div>
          <div id="competitors-body" class="card-body">
            <div class="card-loading">
              <div class="skeleton" style="height:80px; border-radius:10px;"></div>
              <div class="skeleton" style="height:80px; border-radius:10px;"></div>
            </div>
          </div>
        </div>

        <!-- Audience + Build It row -->
        <div class="card-row">
          <!-- Audience -->
          <div class="result-card" id="sec-audience">
            <div class="card-header">
              <div class="card-title">Audience</div>
            </div>
            <div id="audience-body" class="card-body">
              <div class="skeleton" style="height:120px; border-radius:10px;"></div>
            </div>
          </div>

          <!-- Build It -->
          <div class="result-card" id="sec-build">
            <div class="card-header">
              <div class="card-title">Build It</div>
              <div class="card-badge" id="diff-badge">‚Äî</div>
            </div>
            <div id="build-body" class="card-body">
              <div class="skeleton" style="height:120px; border-radius:10px;"></div>
            </div>
          </div>
        </div>

        <!-- Ship It -->
        <div class="result-card" id="sec-ship">
          <div class="card-header">
            <div class="card-title">Ship It</div>
            <div class="card-badge" id="ship-badge">‚Äî</div>
          </div>
          <div id="ship-body" class="card-body">
            <div class="skeleton" style="height:80px; border-radius:10px;"></div>
          </div>
        </div>

        <!-- Community Pulse -->
        <div class="result-card" id="sec-pulse">
          <div class="card-header">
            <div class="card-title">Community Pulse</div>
          </div>
          <div id="pulse-body" class="card-body">
            <div class="card-loading">
              <div class="skeleton" style="height:70px; border-radius:10px;"></div>
              <div class="skeleton" style="height:70px; border-radius:10px;"></div>
              <div class="skeleton" style="height:70px; border-radius:10px;"></div>
            </div>
          </div>
        </div>

        <!-- How to Win -->
        <div class="result-card" id="sec-win">
          <div class="card-header">
            <div class="card-title">How to Win</div>
          </div>
          <div id="win-body" class="card-body">
            <div class="card-loading">
              <div class="skeleton" style="height:70px; border-radius:10px;"></div>
              <div class="skeleton" style="height:70px; border-radius:10px;"></div>
            </div>
          </div>
        </div>

      </div><!-- /cards-grid -->

      <!-- Action row (shows after complete) -->
      <div class="action-row" id="action-row">
        <button class="btn-secondary" onclick="newAnalysis()">New Analysis</button>
        <button class="btn-accent" id="share-btn" onclick="shareResult()">Share Result ‚Üó</button>
      </div>

    </div><!-- /results-content -->
  </div><!-- /results-layout -->
</section>

<!-- Copy feedback toast -->
<div class="copy-feedback" id="copy-feedback">Link copied!</div>

<script>
  // ‚îÄ‚îÄ STATE ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  const SKILLS = [
    { key: 'first_project',   label: 'First project' },
    { key: 'done_a_few',      label: 'Done a few' },
    { key: 'build_regularly', label: 'Build regularly' },
  ];

  let selectedSkillIdx = 0;
  let currentResultId  = null;
  let navObserver      = null;

  // ‚îÄ‚îÄ SKILL SELECTOR ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  function selectSkill(i) {
    selectedSkillIdx = i;
    document.querySelectorAll('.seg-btn').forEach((b, j) => b.classList.toggle('active', i === j));
  }

  // ‚îÄ‚îÄ NAVIGATION ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  function jumpTo(id) {
    document.getElementById(id)?.scrollIntoView({ behavior: 'smooth', block: 'start' });
  }

  function setupNavObserver() {
    if (navObserver) navObserver.disconnect();
    const sections = ['sec-score','sec-market','sec-competitors','sec-audience','sec-build','sec-ship','sec-pulse','sec-win'];
    const navItems = document.querySelectorAll('.nav-item');

    navObserver = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          const idx = sections.indexOf(entry.target.id);
          navItems.forEach((item, i) => item.classList.toggle('active', i === idx));
        }
      });
    }, { rootMargin: '-15% 0px -70% 0px', threshold: 0 });

    sections.forEach(id => {
      const el = document.getElementById(id);
      if (el) navObserver.observe(el);
    });
  }

  // ‚îÄ‚îÄ PILL HELPERS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  function gradeColor(g) {
    return { A: 'green', B: 'blue', C: 'yellow', D: 'red', F: 'red' }[g] || 'muted';
  }

  function existsColor(e) {
    const m = { fully_exists:'red', mostly_exists:'red', partially_exists:'yellow', significant_gap:'green', blue_ocean:'green' };
    return m[e] || 'muted';
  }

  function trendColor(t) {
    return { rapidly_growing:'green', growing:'green', stable:'blue', declining:'red', emerging:'yellow' }[t] || 'muted';
  }

  function diffColor(d) {
    const m = { no_code:'green', beginner:'green', intermediate:'yellow', advanced:'red', expert:'red' };
    return m[d] || 'muted';
  }

  function recColor(r) {
    const m = { highly_recommended:'green', recommended:'blue', possible:'yellow', not_recommended:'red' };
    return m[r] || 'muted';
  }

  function priorityColor(p) {
    return { high:'red', medium:'yellow', low:'muted' }[p] || 'muted';
  }

  function sentimentColor(s) {
    return { pain_point:'red', loved_feature:'green', wish:'yellow' }[s] || 'muted';
  }

  function sentimentEmoji(s) {
    return { pain_point:'üò§', loved_feature:'‚ù§Ô∏è', wish:'‚ú®' }[s] || '';
  }

  function pill(text, color) {
    return `<span class="pill pill-${color}">${text}</span>`;
  }

  function humanize(str) {
    return (str || '').replace(/_/g, ' ').replace(/\b\w/g, c => c.toUpperCase());
  }

  // ‚îÄ‚îÄ RENDERERS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

  function renderOpportunity(d) {
    const g = d.opportunity_grade || '?';
    const gc = gradeColor(g);
    const score = d.opportunity_score || 0;
    const tc = trendColor(d.trend);

    document.getElementById('score-body').innerHTML = `
      <div class="vibe-hero">
        <div class="vibe-grade">${g}</div>
        <div class="vibe-summary-text">${d.opportunity_summary || ''}</div>
        <div class="vibe-pills">
          ${pill(humanize(d.trend || ''), tc)}
          ${pill(humanize(d.opportunity_type || ''), 'purple')}
        </div>
        <div class="vibe-detail">${d.market_size || ''}</div>
      </div>
      <div class="score-bars">
        <div class="score-row">
          <div class="score-row-label">Opportunity</div>
          <div class="score-bar-bg"><div class="score-bar-fill" style="width:${score*10}%; background: var(--${gc === 'green' ? 'green' : gc === 'yellow' ? 'yellow' : 'red'})"></div></div>
          <div class="score-row-val">${score}</div>
        </div>
      </div>
    `;
  }

  function renderMarket(d) {
    const color = existsColor(d.exists);
    document.getElementById('market-badge').textContent = humanize(d.exists || '');
    document.getElementById('market-badge').className = `card-badge pill pill-${color}`;

    const satScore = d.saturation_score || 0;
    document.getElementById('market-body').innerHTML = `
      <p class="summary-text">${d.market_summary || ''}</p>
      <div>
        <div class="section-label">Market Saturation</div>
        <div class="sat-bar-wrap">
          <div class="sat-bar-bg">
            <div class="sat-bar-fill" style="width:${satScore * 10}%"></div>
          </div>
          <div class="sat-bar-label">${satScore}/10</div>
        </div>
      </div>
      ${d.key_differentiators_needed?.length ? `
        <div>
          <div class="section-label">Differentiators Needed</div>
          <div style="display:flex; flex-wrap:wrap; gap:6px;">
            ${d.key_differentiators_needed.map(k => pill(k, 'purple')).join('')}
          </div>
        </div>
      ` : ''}
    `;
  }

  function renderCompetitors(d) {
    if (!d.competitors?.length) {
      document.getElementById('competitors-body').innerHTML = '<div class="empty-state">No competitors found.</div>';
      return;
    }
    document.getElementById('competitors-body').innerHTML = `
      <div class="competitor-list">
        ${d.competitors.map(c => `
          <div class="competitor-card">
            <div class="competitor-header">
              <div class="competitor-name">${c.name || ''}</div>
              ${c.url ? `<a class="competitor-url" href="${c.url}" target="_blank" rel="noopener">${new URL(c.url.startsWith('http') ? c.url : 'https://'+c.url).hostname}</a>` : ''}
            </div>
            <div class="competitor-desc">${c.description || ''}</div>
            <div class="competitor-meta">
              ${c.pricing ? `<div class="competitor-meta-item"><div class="meta-label">Pricing</div><div class="meta-val">${c.pricing}</div></div>` : ''}
            </div>
            ${(c.strengths?.length || c.weaknesses?.length) ? `
              <div class="sw-row">
                ${(c.strengths||[]).map(s => `<span class="sw-tag sw-strength">‚úì ${s}</span>`).join('')}
                ${(c.weaknesses||[]).map(w => `<span class="sw-tag sw-weakness">‚úó ${w}</span>`).join('')}
              </div>
            ` : ''}
          </div>
        `).join('')}
      </div>
    `;
  }

  function renderAudience(d) {
    if (!d.target_audiences?.length) {
      document.getElementById('audience-body').innerHTML = '<div class="empty-state">No data.</div>';
      return;
    }
    document.getElementById('audience-body').innerHTML = `
      <div class="segment-list">
        ${d.target_audiences.map(a => `
          <div class="segment-item">
            <div class="segment-name">${a.segment || ''}</div>
            <div class="segment-meta">
              ${pill(a.size + ' audience', a.size === 'large' ? 'green' : a.size === 'medium' ? 'yellow' : 'muted')}
              ${pill(a.willingness_to_pay + ' WTP', a.willingness_to_pay === 'high' ? 'green' : a.willingness_to_pay === 'medium' ? 'yellow' : 'red')}
            </div>
          </div>
        `).join('')}
      </div>
      ${d.monetization_strategies?.length ? `
        <div style="margin-top:4px">
          <div class="section-label" style="margin-bottom:8px">Monetization</div>
          ${d.monetization_strategies.slice(0,2).map(m => `
            <div class="mono-item">
              <div class="mono-header">
                <div class="mono-model">${m.model || ''}</div>
                ${pill(m.revenue_potential || '', m.revenue_potential?.includes('High') ? 'green' : m.revenue_potential?.includes('Medium') ? 'yellow' : 'muted')}
              </div>
              <div class="mono-desc">${m.description || ''}</div>
            </div>
          `).join('')}
        </div>
      ` : ''}
    `;
  }

  function renderBuild(d) {
    const diffLabel = humanize(d.difficulty || '');
    const diffC = diffColor(d.difficulty);
    const diffScore = d.difficulty_score || 0;
    document.getElementById('diff-badge').textContent = diffLabel;
    document.getElementById('diff-badge').className = `card-badge pill pill-${diffC}`;

    // Show time for the selected skill level
    const skillKey = SKILLS[selectedSkillIdx].key;
    const timeEstimate = d.time_estimates?.[skillKey] || 'Varies';

    const stack = d.tech_stack || {};
    const apis = d.required_apis || [];

    document.getElementById('build-body').innerHTML = `
      <div class="build-time-big">
        <div class="build-time-num">${timeEstimate}</div>
        <div class="build-time-label">for your experience level</div>
      </div>
      <p class="summary-text">${d.technical_summary || ''}</p>
      ${Object.keys(stack).length ? `
        <div>
          <div class="section-label">Tech Stack</div>
          <div class="stack-grid">
            ${Object.entries(stack).map(([k,v]) => v ? `
              <div class="stack-item">
                <div class="stack-layer">${k}</div>
                <div class="stack-val">${v}</div>
              </div>
            ` : '').join('')}
          </div>
        </div>
      ` : ''}
      ${apis.length ? `
        <div>
          <div class="section-label">Key APIs</div>
          <div class="api-list">
            ${apis.slice(0,4).map(a => `
              <div class="api-item">
                <div class="api-name">
                  ${a.url ? `<a href="${a.url}" target="_blank" rel="noopener">${a.name}</a>` : a.name}
                </div>
                <div class="api-cost">${a.cost || ''}</div>
              </div>
            `).join('')}
          </div>
        </div>
      ` : ''}
    `;
  }

  function renderDeploy(d) {
    const rec = d.primary_recommendation || '';
    document.getElementById('ship-badge').textContent = humanize(rec);
    document.getElementById('ship-badge').className = 'card-badge pill pill-blue';

    const options = d.deployment_options || [];
    document.getElementById('ship-body').innerHTML = `
      ${d.quick_win_approach ? `<p class="summary-text" style="margin-bottom:4px">${d.quick_win_approach}</p>` : ''}
      <div class="deploy-list">
        ${options.slice(0,4).map(o => {
          const rc = recColor(o.recommendation_level);
          return `
            <div class="deploy-item">
              <div>
                <div class="deploy-platform">${o.platform || ''}</div>
                ${o.reasoning ? `<div class="deploy-reason">${o.reasoning}</div>` : ''}
              </div>
              <div style="display:flex;flex-direction:column;align-items:flex-end;gap:4px;flex-shrink:0;margin-left:12px">
                ${pill(humanize(o.recommendation_level || ''), rc)}
                ${o.time_to_market ? `<div class="deploy-time">${o.time_to_market}</div>` : ''}
              </div>
            </div>
          `;
        }).join('')}
      </div>
    `;
  }

  function renderSentiment(d) {
    const insights = d.community_insights || [];
    if (!insights.length) {
      document.getElementById('pulse-body').innerHTML = '<div class="empty-state">No community data found.</div>';
      return;
    }
    document.getElementById('pulse-body').innerHTML = `
      <div class="sentiment-list">
        ${insights.map(s => `
          <div class="sentiment-item ${s.sentiment}">
            <div class="sentiment-quote">"${s.quote || ''}"</div>
            <div class="sentiment-meta">
              ${pill(sentimentEmoji(s.sentiment) + ' ' + humanize(s.sentiment || ''), sentimentColor(s.sentiment))}
              <span class="sentiment-theme">${s.theme || ''}</span>
              ${s.source ? `<span class="sentiment-source">‚Äî ${s.source}</span>` : ''}
            </div>
          </div>
        `).join('')}
      </div>
    `;
  }

  function renderWin(d) {
    const all = d.improvement_suggestions || [];

    // Cap to: top 2 differentiators (any priority labeled "differentiator" or first 2 high), then 2 high, 2 medium
    const diffs    = all.filter(s => s.priority === 'high').slice(0, 2);
    const highs    = all.filter(s => s.priority === 'high').slice(2, 4);
    const mediums  = all.filter(s => s.priority === 'medium').slice(0, 2);

    const renderItems = (items, label) => {
      if (!items.length) return '';
      return `
        <div class="win-divider">${label}</div>
        ${items.map(s => `
          <div class="win-item">
            <div class="win-header">
              <div class="win-suggestion">${s.suggestion || ''}</div>
              ${pill(s.priority, priorityColor(s.priority))}
            </div>
            <div class="win-reasoning">${s.reasoning || ''}</div>
          </div>
        `).join('')}
      `;
    };

    // Simpler: just show top 6 with priority pill
    const shown = all.slice(0, 6);
    document.getElementById('win-body').innerHTML = `
      <div class="win-list">
        ${shown.map(s => `
          <div class="win-item">
            <div class="win-header">
              <div class="win-suggestion">${s.suggestion || ''}</div>
              ${pill(s.priority, priorityColor(s.priority))}
            </div>
            <div class="win-reasoning">${s.reasoning || ''}</div>
          </div>
        `).join('')}
      </div>
    `;
  }

  // ‚îÄ‚îÄ MAIN ANALYZE FLOW ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  async function analyze() {
    const idea = document.getElementById('idea-input').value.trim();
    if (!idea) { alert('Please describe your idea first.'); return; }

    const skillKey = SKILLS[selectedSkillIdx].key;

    // Switch to results page
    document.getElementById('landing').style.display = 'none';
    document.getElementById('results').style.display = 'block';
    document.getElementById('results-title').textContent = 'Analyzing your idea...';
    document.getElementById('results-idea-label').textContent = idea;
    document.getElementById('status-bar').style.display = 'flex';
    document.getElementById('action-row').classList.remove('visible');

    // Reset all card bodies to skeleton
    resetSkeletons();
    setupNavObserver();
    window.scrollTo(0, 0);

    currentResultId = null;

    try {
      const response = await fetch('/api/analyze', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ idea, skillLevel: skillKey }),
      });

      const reader = response.body.getReader();
      const decoder = new TextDecoder();
      let buffer = '';

      while (true) {
        const { done, value } = await reader.read();
        if (done) break;
        buffer += decoder.decode(value, { stream: true });

        const parts = buffer.split('\n\n');
        buffer = parts.pop();

        for (const part of parts) {
          const lines = part.split('\n');
          let event = '', data = '';
          for (const line of lines) {
            if (line.startsWith('event: ')) event = line.slice(7);
            if (line.startsWith('data: '))  data  = line.slice(6);
          }
          if (!event || !data) continue;

          try {
            const parsed = JSON.parse(data);
            handleEvent(event, parsed, idea);
          } catch {}
        }
      }
    } catch (err) {
      document.getElementById('status-text').textContent = 'Error: ' + err.message;
    }
  }

  function handleEvent(event, data, idea) {
    switch (event) {
      case 'status':
        document.getElementById('status-text').textContent = data.message || '';
        break;
      case 'market':
        renderMarket(data);
        renderCompetitors(data);
        break;
      case 'technical':
        renderBuild(data);
        break;
      case 'opportunity':
        renderOpportunity(data);
        break;
      case 'deployment':
        renderDeploy(data);
        break;
      case 'sentiment':
        renderSentiment(data);
        break;
      case 'complete':
        currentResultId = data.resultId;
        document.getElementById('status-bar').style.display = 'none';
        document.getElementById('results-title').textContent = `Analyzed: ${idea}`;
        document.getElementById('action-row').classList.add('visible');
        if (data.resultId) {
          history.replaceState(null, '', `?r=${data.resultId}`);
        }
        break;
      case 'error':
        document.getElementById('status-text').textContent = '‚ö† ' + (data.message || 'Something went wrong');
        break;
    }
  }

  function resetSkeletons() {
    document.getElementById('score-body').innerHTML = `<div class="card-loading"><div class="skeleton" style="height:80px;border-radius:12px;"></div><div class="skeleton" style="height:20px;width:60%;"></div></div>`;
    document.getElementById('market-body').innerHTML = `<div class="card-loading"><div class="skeleton" style="height:60px;border-radius:8px;"></div><div class="skeleton" style="height:8px;width:80%;"></div></div>`;
    document.getElementById('competitors-body').innerHTML = `<div class="card-loading"><div class="skeleton" style="height:80px;border-radius:10px;"></div><div class="skeleton" style="height:80px;border-radius:10px;"></div></div>`;
    document.getElementById('audience-body').innerHTML = `<div class="skeleton" style="height:120px;border-radius:10px;"></div>`;
    document.getElementById('build-body').innerHTML = `<div class="skeleton" style="height:120px;border-radius:10px;"></div>`;
    document.getElementById('ship-body').innerHTML = `<div class="skeleton" style="height:80px;border-radius:10px;"></div>`;
    document.getElementById('pulse-body').innerHTML = `<div class="card-loading"><div class="skeleton" style="height:70px;border-radius:10px;"></div><div class="skeleton" style="height:70px;border-radius:10px;"></div><div class="skeleton" style="height:70px;border-radius:10px;"></div></div>`;
    document.getElementById('win-body').innerHTML = `<div class="card-loading"><div class="skeleton" style="height:70px;border-radius:10px;"></div><div class="skeleton" style="height:70px;border-radius:10px;"></div></div>`;
    document.getElementById('market-badge').textContent = '‚Äî';
    document.getElementById('market-badge').className = 'card-badge';
    document.getElementById('diff-badge').textContent = '‚Äî';
    document.getElementById('diff-badge').className = 'card-badge';
    document.getElementById('ship-badge').textContent = '‚Äî';
    document.getElementById('ship-badge').className = 'card-badge';
  }

  // ‚îÄ‚îÄ SHARE / LOAD ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  function shareResult() {
    const url = window.location.href;
    navigator.clipboard.writeText(url).then(() => {
      const el = document.getElementById('copy-feedback');
      el.classList.add('show');
      setTimeout(() => el.classList.remove('show'), 2500);
    });
  }

  async function loadSharedResult(id) {
    document.getElementById('landing').style.display = 'none';
    document.getElementById('results').style.display = 'block';
    document.getElementById('status-text').textContent = 'Loading shared result...';
    window.scrollTo(0, 0);

    try {
      const r = await fetch(`/api/result/${id}`);
      if (!r.ok) throw new Error('Result not found or expired');
      const d = await r.json();

      document.getElementById('results-title').textContent = `Analyzed: ${d.idea}`;
      document.getElementById('results-idea-label').textContent = d.idea;

      // Restore selected skill for time display
      const skillIdx = SKILLS.findIndex(s => s.key === d.skillLevel);
      if (skillIdx >= 0) selectedSkillIdx = skillIdx;

      renderMarket(d.market);
      renderCompetitors(d.market);
      renderOpportunity(d.opportunity);
      renderBuild(d.technical);
      renderDeploy(d.deployment);
      renderSentiment(d.sentiment);
      renderWin(d.opportunity);
      renderAudience(d.opportunity);

      document.getElementById('status-bar').style.display = 'none';
      document.getElementById('action-row').classList.add('visible');
      currentResultId = id;
      setupNavObserver();
    } catch (err) {
      document.getElementById('status-text').textContent = '‚ö† ' + err.message;
    }
  }

  // ‚îÄ‚îÄ NEW ANALYSIS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  function newAnalysis() {
    if (navObserver) navObserver.disconnect();
    currentResultId = null;
    history.replaceState(null, '', '/');
    document.getElementById('results').style.display = 'none';
    document.getElementById('landing').style.display = 'flex';
    document.getElementById('idea-input').value = '';
    window.scrollTo(0, 0);
  }

  // ‚îÄ‚îÄ INIT: check for shared result ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  (function init() {
    const params = new URLSearchParams(window.location.search);
    const rid = params.get('r');
    if (rid) {
      loadSharedResult(rid);
    }
  })();
</script>
</body>
</html>
